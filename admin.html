<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Адмін-панель БМЗ</title>
<link rel="icon" type="image/png" href="favicon.png">
<style>
body{background:#1c1c1c;color:#f5f5f5;font-family:"Segoe UI",sans-serif;margin:0;padding:20px;}
h1{text-align:center;color:#00c0c4;}
input,select{padding:8px 12px;border-radius:6px;border:none;background:#2a2a2a;color:#fff;}
table{width:100%;border-collapse:collapse;background:#2b2b2b;margin-top:15px;}
th,td{padding:10px;border-bottom:1px solid #3a3a3a;text-align:left;}
th{background:#333;}
tr:hover{background:#3d3d3d;}
a{color:#00c0c4;text-decoration:none;}
a:hover{text-decoration:underline;}
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
</head>
<body>
<h1>Адміністративна панель БМЗ</h1>
<div class="filter-bar">
  <select id="unitFilter"><option value="all">Всі підрозділи</option></select>
</div>
<table id="bmzTable"><thead><tr><th>Підрозділ</th><th>Посада</th><th>ПІБ</th><th>ШПК</th><th>Військове звання</th></tr></thead><tbody></tbody></table>

<script>
const structuralPositions=[/* той самий список */];
const tableBody=document.querySelector("#bmzTable tbody");
let data=[];
Papa.parse("bmz.csv",{download:true,header:true,delimiter:";",complete:r=>{
  data=r.data;
  fillFilter(data);
  render(data);
}});
function fillFilter(d){
  const u=[...new Set(d.map(r=>r["Підрозділ"]).filter(Boolean))].sort();
  const s=document.getElementById("unitFilter");
  u.forEach(v=>{const o=document.createElement("option");o.value=v;o.textContent=v;s.appendChild(o);});
  s.addEventListener("change",()=>{const val=s.value;render(val==="all"?data:data.filter(r=>r["Підрозділ"]===val));});
}
function render(arr){
  tableBody.innerHTML="";
  arr.forEach(r=>{
    const page=r["ПІБ_лат"]?`soldiers/${r["ПІБ_лат"]}.html`:"#";
    const tr=document.createElement("tr");
    tr.innerHTML=`
    <td><b>${r["ПідрозділКод"]||""}</b> ${r["Підрозділ"]||""}</td>
    <td>${r["Посада"]||""}</td>
    <td>${
      r["ПІБ"]
        ? `<a href="${page}" target="_blank">${r["ПІБ"]}</a>`
        : structuralPositions.includes(r["Посада"])
          ? `<b style="color:#00c0c4;">${r["Посада"]}</b>`
          : "<i>Не призначено</i>"
    }</td>
    <td>${r["ШПК"]||""}</td>
    <td>${r["Військове звання"]||""}</td>`;
    tableBody.appendChild(tr);
  });
}
</script>
</body>
</html>
