<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–û—Ñ—ñ—Ü–µ—Ä—Å—å–∫–∞ –ø–∞–Ω–µ–ª—å –ë–ú–ó</title>
  <link rel="icon" type="image/png" href="favicon.png">
  <style>
    body{background:#1c1c1c;color:#f5f5f5;font-family:"Segoe UI",sans-serif;margin:0;padding:20px;}
    h1{text-align:center;color:#00c0c4;margin-bottom:20px;}
    .filter-bar{display:flex;justify-content:space-between;align-items:center;gap:10px;margin-bottom:15px;}
    input,select{padding:8px 12px;border-radius:6px;border:none;background:#2a2a2a;color:#fff;}
    input::placeholder{color:#aaa;}
    table{width:100%;border-collapse:collapse;border-radius:10px;overflow:hidden;background:#2b2b2b;}
    th,td{padding:10px;border-bottom:1px solid #3a3a3a;text-align:left;}
    th{background:#333;}
    tr:hover{background:#3d3d3d;}
    a{color:#00c0c4;text-decoration:none;} a:hover{text-decoration:underline;}
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
</head>
<body>
  <h1>–û—Ñ—ñ—Ü–µ—Ä—Å—å–∫–∞ –ø–∞–Ω–µ–ª—å –ë–ú–ó</h1>
  <div class="filter-bar">
    <input type="password" id="password" placeholder="üîê –í–≤–µ–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å...">
    <button onclick="login()">–£–≤—ñ–π—Ç–∏</button>
    <select id="unitFilter"><option value="all">–í—Å—ñ –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª–∏</option></select>
  </div>
  <table id="bmzTable">
    <thead><tr><th>–ü—ñ–¥—Ä–æ–∑–¥—ñ–ª</th><th>–ü–æ—Å–∞–¥–∞</th><th>–ü–Ü–ë</th><th>–®–ü–ö</th><th>–í—ñ–π—Å—å–∫–æ–≤–µ –∑–≤–∞–Ω–Ω—è</th></tr></thead>
    <tbody></tbody>
  </table>

  <script>
    const tableBody=document.querySelector("#bmzTable tbody");
    let data=[],unitCode="";
    const structuralPositions=[/* –≤—Å—Ç–∞–≤–ª—è—î–º–æ —Ç–æ–π —Å–∞–º–∏–π –º–∞—Å–∏–≤ —è–∫ —É index.html */];

    function login(){
      const login=document.getElementById("password").value.trim();
      if(login==="ofcr123")unitCode="OFCR";
      else if(login==="upr123")unitCode="upr";
      else if(login==="rzb123")unitCode="rzb";
      else if(login==="pmm123")unitCode="pmm";
      else{alert("‚ùå –ù–µ–≤—ñ—Ä–Ω–∏–π –ø–∞—Ä–æ–ª—å!");return;}
      fetchData();
    }

    function fetchData(){
      Papa.parse("bmz.csv",{download:true,header:true,delimiter:";",complete:r=>{
        data=r.data;
        fillFilter(data);
        render(data);
      }});
    }

    function fillFilter(d){
      const units=[...new Set(d.map(r=>r["–ü—ñ–¥—Ä–æ–∑–¥—ñ–ª"]).filter(Boolean))].sort();
      const sel=document.getElementById("unitFilter");
      sel.innerHTML='<option value="all">–í—Å—ñ –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª–∏</option>';
      units.forEach(u=>{const o=document.createElement("option");o.value=u;o.textContent=u;sel.appendChild(o);});
      sel.addEventListener("change",applyFilter);
    }

    function applyFilter(){
      const val=document.getElementById("unitFilter").value;
      render(val==="all"?data:data.filter(r=>r["–ü—ñ–¥—Ä–æ–∑–¥—ñ–ª"]===val));
    }

    function render(arr){
      tableBody.innerHTML="";
      arr.forEach(r=>{
        if(unitCode==="OFCR"||r["–ü—ñ–¥—Ä–æ–∑–¥—ñ–ª–ö–æ–¥"]===unitCode){
          const tr=document.createElement("tr");
          const page=r["–ü–Ü–ë_–ª–∞—Ç"]?`soldiers/${r["–ü–Ü–ë_–ª–∞—Ç"]}.html`:"#";
          tr.innerHTML=`
          <td><b>${r["–ü—ñ–¥—Ä–æ–∑–¥—ñ–ª–ö–æ–¥"]||""}</b> ${r["–ü—ñ–¥—Ä–æ–∑–¥—ñ–ª"]||""}</td>
          <td>${r["–ü–æ—Å–∞–¥–∞"]||""}</td>
          <td>${
            r["–ü–Ü–ë"]
              ? `<a href="${page}" target="_blank">${r["–ü–Ü–ë"]}</a>`
              : structuralPositions.includes(r["–ü–æ—Å–∞–¥–∞"])
                ? `<b style="color:#00c0c4;">${r["–ü–æ—Å–∞–¥–∞"]}</b>`
                : "<i>–ù–µ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–æ</i>"
          }</td>
          <td>${r["–®–ü–ö"]||""}</td>
          <td>${r["–í—ñ–π—Å—å–∫–æ–≤–µ –∑–≤–∞–Ω–Ω—è"]||""}</td>`;
          tableBody.appendChild(tr);
        }
      });
    }
  </script>
</body>
</html>
